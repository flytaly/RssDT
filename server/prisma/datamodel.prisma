enum DigestSchedule {
    REALTIME
    EVERYHOUR
    EVERY2HOURS
    EVERY3HOURS
    EVERY6HOURS
    EVERY12HOURS
    DAILY
}

enum Permission {
    ADMIN
    USER
}

enum SettingState {
    ENABLE
    DISABLE
    DEFAULT
}

type User {
    id: ID! @id
    email: String! @unique
    feeds: [UserFeed] @relation(name: "UserFeeds", onDelete: CASCADE)
    password: String
    setPasswordToken: String @unique
    setPasswordTokenExpiry: DateTime
    permissions: [Permission] @scalarList(strategy: RELATION)
    locale: String @default(value: "en-GB")
    timeZone: String @default(value: "GMT")
    createdAt: DateTime! @createdAt
    updatedAt: DateTime! @updatedAt
    dailyDigestHour: Int @default(value: 18)
    shareEnable: Boolean @default(value: true)
    filterShare: [String!]! @scalarList(strategy: RELATION)
    withContentTableDefault: Boolean @default(value: false)
}

type UserFeed {
    id: ID! @id
    activated: Boolean @default(value: false)
    activationToken: String
    activationTokenExpiry: DateTime
    createdAt: DateTime! @createdAt
    feed: Feed! @relation(link: TABLE)
    lastUpdate: DateTime
    schedule: DigestSchedule @default(value: DAILY)
    unsubscribeToken: String @unique
    unsubscribeTokenExpiry: DateTime
    updatedAt: DateTime! @updatedAt
    user: User! @relation(link: TABLE, name: "UserFeeds")
    withContentTable: SettingState @default(value: DEFAULT)
}

type Feed {
    id: ID! @id
    url: String! @unique
    link: String
    title: String
    description: String
    activated: Boolean @default(value: false)
    language: String
    imageUrl: String
    imageTitle: String
    userFeeds: [UserFeed]
    items: [FeedItem] @relation(name: "FeedItems", onDelete: CASCADE)
    lastSuccessful: DateTime
    createdAt: DateTime! @createdAt
    updatedAt: DateTime! @updatedAt
}

type ItemEnclosure {
    id: ID! @id
    url: String!
    type: String
    length: String
    item: FeedItem! @relation(link: TABLE, name: "ItemEnclosures")
    createdAt: DateTime! @createdAt
    updatedAt: DateTime! @updatedAt
}

type FeedItem {
    id: ID! @id
    feed: Feed @relation(link: TABLE, name: "FeedItems")
    title: String
    description: String
    summary: String
    pubDate: DateTime
    link: String
    guid: String!
    imageUrl: String
    enclosures: [ItemEnclosure] @relation(name: "ItemEnclosures", onDelete: CASCADE)
    createdAt: DateTime! @createdAt
    updatedAt: DateTime! @updatedAt
}
