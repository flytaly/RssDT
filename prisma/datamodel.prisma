enum DigestSchedule {
    REALTIME
    EVERYHOUR
    EVERY2HOURS
    EVERY3HOURS
    EVERY6HOURS
    EVERY12HOURS
    DAILY
}

enum Permission {
    ADMIN
    USER
}

type User {
    id: ID! @unique
    email: String! @unique
    feeds: [UserFeed!]! @relation(name: "UserFeeds", onDelete: CASCADE)
    password: String
    resetToken: String
    resetTokenExpiry: String
    permissions: [Permission]
    createdAt: DateTime!
    updatedAt: DateTime!
}

type UserFeed {
    id: ID! @unique
    feed: Feed!
    schedule: DigestSchedule @default(value: DAILY)
    user: User! @relation(name: "UserFeeds", onDelete: SET_NULL)
}

type Feed {
    id: ID! @unique
    url: String! @unique
    link: String # link to the website
    title: String
    description: String
    image: String
    userFeeds: [UserFeed!]!
    items: [FeedItem!]!
    createdAt: DateTime!
    updatedAt: DateTime!
}

type ItemEnclosure {
    id: ID! @unique
    url: String!
    type: String
    length: String
    item: FeedItem! @relation(name: "ItemEnclosures", onDelete: SET_NULL)
}

type FeedItem {
    title: String
    description: String
    summary: String
    pubDate: DateTime
    link: String
    guid: String!
    imageUrl: String
    imageTitle: String
    enclosures: [ItemEnclosure!]!
        @relation(name: "ItemEnclosures", onDelete: CASCADE)
}
