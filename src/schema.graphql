# import * from './generated/prisma.graphql'
type Message {
    message: String
}

type User {
    id: ID!
    email: String!
    feeds: [UserFeed!]!
    permissions: [Permission!]!
    createdAt: DateTime!
}

type UserFeed {
    feed: Feed!
    schedule: DigestSchedule
    user: User
}

type Feed {
    url: String!
    link: String
    title: String
    description: String
    imageUrl: String
    imageTitle: String
    items(
        where: FeedItemWhereInput
        orderBy: FeedItemOrderByInput
        skip: Int
        after: String
        before: String
        first: Int
        last: Int
    ): [FeedItem!]
}

type Mutation {
    """
    Add feed to user with given email.
    If user doesn't exist the mutation will create a new user.
    """
    addFeed(
        email: String!
        feedUrl: String
        feedSchedule: DigestSchedule
    ): Message
    confirmSubscription(email: String!, token: String!): Message!
    requestPasswordChange(email: String!): Message
    setPassword(email: String!, token: String!, password: String!): User!
    signIn(email: String!, password: String!): Message
}

type Query {
    user: User
}
